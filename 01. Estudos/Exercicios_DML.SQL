USE EXERCICIO;

/* CRIANDO A TABELA DE CLIENTES */

CREATE ALTER TABLE CLIENTE(
	IDCLIENTE INT IDENTITY (1,1) PRIMARY KEY ,
	NOME VARCHAR(30) NOT NULL,
	SEXO CHAR(1) NOT NULL CHECK (SEXO IN ('M', 'F')),
	EMAIL VARCHAR(50) UNIQUE,
	CPF VARCHAR(15) UNIQUE
);

CREATE TABLE ENDERECO(
	IDENDERECO INT IDENTITY (1,1) PRIMARY KEY, 
	RUA VARCHAR(30) NOT NULL,
	BAIRRO VARCHAR(30) NOT NULL,
	CIDADE VARCHAR(30) NOT NULL,
	ESTADO CHAR(2) NOT NULL,
	ID_CLIENTE INT UNIQUE,

	FOREIGN KEY(ID_CLIENTE)
	REFERENCES CLIENTE(IDCLIENTE)
);

CREATE TABLE TELEFONE(
	IDTELEFONE INT IDENTITY (1,1) PRIMARY KEY, 
	TIPO CHAR(3) NOT NULL CHECK (TIPO IN ('RES','COM','CEL')),
	NUMERO VARCHAR(10) NOT NULL,
	ID_CLIENTE INT,

	FOREIGN KEY(ID_CLIENTE)
	REFERENCES CLIENTE(IDCLIENTE)
);




-----

INSERT INTO CLIENTE (NOME, SEXO, EMAIL, CPF) VALUES ('JOAO', 'M', 'JOAO@IG.COM', '766567587887');
INSERT INTO CLIENTE (NOME, SEXO, EMAIL, CPF) VALUES ('CARLOS', 'M', 'CARLOS@IG.COM', '5464553466');
INSERT INTO CLIENTE (NOME, SEXO, EMAIL, CPF) VALUES ('ANA', 'F', 'ANA@IG.COM', '456545678');
INSERT INTO CLIENTE (NOME, SEXO, EMAIL, CPF) VALUES ('CLARA', 'F', 'NULL', '5687766856');
INSERT INTO CLIENTE (NOME, SEXO, EMAIL, CPF) VALUES ('JORGE', 'M', 'JORGE@IG.COM', '8756547688');
INSERT INTO CLIENTE (NOME, SEXO, EMAIL, CPF) VALUES ('CELIA', 'F', 'CELIA@IG.COM', '5767876889');

SELECT * FROM CLIENTE WITH(NOLOCK)

-----*

INSERT INTO ENDERECO (RUA, BAIRRO, CIDADE, ESTADO, ID_CLIENTE) VALUES ('RUA ANTONIO SA','CENTRO','B. HORIZONTE','MG',4);
INSERT INTO ENDERECO (RUA, BAIRRO, CIDADE, ESTADO, ID_CLIENTE) VALUES ('RUA CAPITAO HERMES','CENTRO','RIO DE JANEIRO','RJ',1);
INSERT INTO ENDERECO (RUA, BAIRRO, CIDADE, ESTADO, ID_CLIENTE) VALUES ('RUA PRES VARGAS','JARDINS','SAO PAULO','SP',3);
INSERT INTO ENDERECO (RUA, BAIRRO, CIDADE, ESTADO, ID_CLIENTE) VALUES ('RUA ALFANDEGA','ESTACIO','RIO DE JANEIRO','RJ',2);
INSERT INTO ENDERECO (RUA, BAIRRO, CIDADE, ESTADO, ID_CLIENTE) VALUES ('RUA DO OUVIDOR','FLAMENGO','RIO DE JANEIRO','RJ',6);
INSERT INTO ENDERECO (RUA, BAIRRO, CIDADE, ESTADO, ID_CLIENTE) VALUES ('RUA URUGUAIANA','CENTRO','VITORIA','ES',5);
INSERT INTO ENDERECO (RUA, BAIRRO, CIDADE, ESTADO, ID_CLIENTE) VALUES ('RUA ALFANDEGA','CENTRO','SAO PAULO','SP',5); -- NAO REGISTROU POIS VIOLOU A CONSTRAINT

SELECT * FROM ENDERECO WITH(NOLOCK)
---

INSERT INTO TELEFONE (TIPO, NUMERO, ID_CLIENTE)VALUES('CEL','78458743',5);
INSERT INTO TELEFONE (TIPO, NUMERO, ID_CLIENTE)VALUES('RES','56576876',5);
INSERT INTO TELEFONE (TIPO, NUMERO, ID_CLIENTE)VALUES('CEL','87866896',1);
INSERT INTO TELEFONE (TIPO, NUMERO, ID_CLIENTE)VALUES('COM','54768899',2);
INSERT INTO TELEFONE (TIPO, NUMERO, ID_CLIENTE)VALUES('RES','99667587',1);
INSERT INTO TELEFONE (TIPO, NUMERO, ID_CLIENTE)VALUES('CEL','78989765',3);
INSERT INTO TELEFONE (TIPO, NUMERO, ID_CLIENTE)VALUES('CEL','99766676',3);
INSERT INTO TELEFONE (TIPO, NUMERO, ID_CLIENTE)VALUES('COM','66687899',1);
INSERT INTO TELEFONE (TIPO, NUMERO, ID_CLIENTE)VALUES('RES','89986668',5);
INSERT INTO TELEFONE (TIPO, NUMERO, ID_CLIENTE)VALUES('CEL','88687909',2);

/* EXERCICIOS DML */

INSERT INTO CLIENTE (NOME, SEXO, EMAIL, CPF) VALUES('FLAVIO','M','FLAVIO@IG.COM','4657765');
INSERT INTO CLIENTE (NOME, SEXO, EMAIL, CPF) VALUES('ANDRE','M','ANDRE@GLOBO.COM','7687567');
INSERT INTO CLIENTE (NOME, SEXO, EMAIL, CPF) VALUES('KARLA','M','KARLA@GMAIL.COM','545676778');
INSERT INTO CLIENTE (NOME, SEXO, EMAIL, CPF) VALUES('DANIELE','M','DANIELE@GMAIL.COM','43536789');
INSERT INTO CLIENTE (NOME, SEXO, EMAIL, CPF) VALUES('GIOVANA','F','GIOVANA@GMAIL.COM','0876655');
INSERT INTO CLIENTE (NOME, SEXO, EMAIL, CPF) VALUES('LORENA','M',NULL,'9965562324');
INSERT INTO CLIENTE (NOME, SEXO, EMAIL, CPF) VALUES('EDUARDO','M',NULL,'8888745323');
INSERT INTO CLIENTE (NOME, SEXO, EMAIL, CPF) VALUES('ANTONIO','F','ANTONIO@IG.COM','12436767');
INSERT INTO CLIENTE (NOME, SEXO, EMAIL, CPF) VALUES('ANTONIO','M','ANTONIO@UOL.COM','3423565');
INSERT INTO CLIENTE (NOME, SEXO, EMAIL, CPF) VALUES('ELAINE','M','ELAINE@GLOBO.COM','32567763');
INSERT INTO CLIENTE (NOME, SEXO, EMAIL, CPF) VALUES('CARMEM','M','CARMEM@IG.COM','787832213');
INSERT INTO CLIENTE (NOME, SEXO, EMAIL, CPF) VALUES('ADRIANA','F','ADRIANA@GMAIL.COM','88556942');
INSERT INTO CLIENTE (NOME, SEXO, EMAIL, CPF) VALUES('JOICE','F','JOICE@GMAIL.COM','55412256');

SELECT * FROM CLIENTE WITH(NOLOCK)

--DRROPANDO EMAIL UNIQUE DA TABELA

ALTER TABLE CLIENTE DROP CONSTRAINT UQ__CLIENTE__161CF72426E4962E;

/* CADASTRE UM ENDERECO PARA CADA CLIENTE */

SELECT * FROM ENDERECO WITH(NOLOCK);
--DROPANDO ID CLIENTE UNIQUE PARA QUE MAIS DE UM CLIENTE POSSA TER OUTROS ENDERECOS

ALTER TABLE ENDERECO DROP CONSTRAINT UQ__ENDERECO__23A34131575EA349;

INSERT INTO ENDERECO (RUA, BAIRRO, CIDADE, ESTADO, ID_CLIENTE) VALUES('RUA GUEDES','CASCADURA','B. HORIZONTE','MG',9);
INSERT INTO ENDERECO (RUA, BAIRRO, CIDADE, ESTADO, ID_CLIENTE) VALUES('RUA MAIA LACERDA','ESTACIO','RIO DE JANEIRO','RJ',10);
INSERT INTO ENDERECO (RUA, BAIRRO, CIDADE, ESTADO, ID_CLIENTE) VALUES('RUA VISCONDESSA','CENTRO','RIO DE JANEIRO','RJ',11);
INSERT INTO ENDERECO (RUA, BAIRRO, CIDADE, ESTADO, ID_CLIENTE) VALUES('RUA NELSON MANDELA','COPACABANA','RIO DE JANEIRO','RJ',14);
INSERT INTO ENDERECO (RUA, BAIRRO, CIDADE, ESTADO, ID_CLIENTE) VALUES('RUA ARAUJO LIMA','CENTRO','VITORIA','ES',22);
INSERT INTO ENDERECO (RUA, BAIRRO, CIDADE, ESTADO, ID_CLIENTE) VALUES('RUA CASTRO ALVES','LEBLON','RIO DE JANEIRO','RJ',14);
INSERT INTO ENDERECO (RUA, BAIRRO, CIDADE, ESTADO, ID_CLIENTE) VALUES('AV CAPITAO ANTUNES','CENTRO','CURITIBA','PR',15);
INSERT INTO ENDERECO (RUA, BAIRRO, CIDADE, ESTADO, ID_CLIENTE) VALUES('AV CARLOS BARROSO','JARDINS','SAO PAULO','SP',16);
INSERT INTO ENDERECO (RUA, BAIRRO, CIDADE, ESTADO, ID_CLIENTE) VALUES('ALAMEDA SAMPAIO','BOM RETIRO','CURITIBA','PR',17);
INSERT INTO ENDERECO (RUA, BAIRRO, CIDADE, ESTADO, ID_CLIENTE) VALUES('RUA DA LAPA','LAPA','SAO PAULO','SP',18);
INSERT INTO ENDERECO (RUA, BAIRRO, CIDADE, ESTADO, ID_CLIENTE) VALUES('RUA GERONIMO','CENTRO','RIO DE JANEIRO','RJ',19);
INSERT INTO ENDERECO (RUA, BAIRRO, CIDADE, ESTADO, ID_CLIENTE) VALUES('RUA GOMES ','ATAIDE','VILA VELHA','ES',20);
INSERT INTO ENDERECO (RUA, BAIRRO, CIDADE, ESTADO, ID_CLIENTE) VALUES('RUA GOMES FREIRE','CENTRO','RIO DE JANEIRO','RJ',8);
INSERT INTO ENDERECO (RUA, BAIRRO, CIDADE, ESTADO, ID_CLIENTE) VALUES('RUA MARIO COVAS','CAMPINAS','GOIAS','GO',30);

/* CADASTRE TELEFONES PARA OS CLIENTES */


INSERT INTO TELEFONE (TIPO, NUMERO, ID_CLIENTE)VALUES('RES','68976565',9);
INSERT INTO TELEFONE (TIPO, NUMERO, ID_CLIENTE)VALUES('CEL','99656675',9);
INSERT INTO TELEFONE (TIPO, NUMERO, ID_CLIENTE)VALUES('CEL','33567765',11);
INSERT INTO TELEFONE (TIPO, NUMERO, ID_CLIENTE)VALUES('CEL','88668786',11);
INSERT INTO TELEFONE (TIPO, NUMERO, ID_CLIENTE)VALUES('COM','55689654',11);
INSERT INTO TELEFONE (TIPO, NUMERO, ID_CLIENTE)VALUES('COM','88687979',12);
INSERT INTO TELEFONE (TIPO, NUMERO, ID_CLIENTE)VALUES('COM','88679978',16);
INSERT INTO TELEFONE (TIPO, NUMERO, ID_CLIENTE)VALUES('CEL','99655768',17);
INSERT INTO TELEFONE (TIPO, NUMERO, ID_CLIENTE)VALUES('RES','89955665',18);
INSERT INTO TELEFONE (TIPO, NUMERO, ID_CLIENTE)VALUES('RES','77455786',19);
INSERT INTO TELEFONE (TIPO, NUMERO, ID_CLIENTE)VALUES('RES','89766554',19);
INSERT INTO TELEFONE (TIPO, NUMERO, ID_CLIENTE)VALUES('RES','77755785',20);
INSERT INTO TELEFONE (TIPO, NUMERO, ID_CLIENTE)VALUES('COM','44522578',21);
INSERT INTO TELEFONE (TIPO, NUMERO, ID_CLIENTE)VALUES('CEL','44522578',30);
INSERT INTO TELEFONE (TIPO, NUMERO, ID_CLIENTE)VALUES('COM','88965676',14);
INSERT INTO TELEFONE (TIPO, NUMERO, ID_CLIENTE)VALUES('CEL','89966809',15);

/*RELATORIO GERAL DE TODOS OS CLIENTES*/

SELECT * FROM CLIENTE A
JOIN ENDERECO B
ON
JOIN 

